{"version":3,"file":"itee-oracle.esm.js","sources":["../sources/TOracleDatabase.js"],"sourcesContent":["/**\n * @author [Ahmed DCHAR]{@link https://github.com/dragoneel}\n * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause}\n *\n * @file Todo\n *\n * @example Todo\n *\n */\n\nimport * as OracleDBDriver   from 'oracledb'\nimport { TAbstractDatabase } from 'itee-database'\n\n//https://github.com/oracle/node-oracledb#-installation\n\nclass TOracleDatabase extends TAbstractDatabase {\n\n    constructor ( parameters = {} ) {\n\n        const _parameters = {\n            ...{},\n            ...parameters,\n            ...{\n                driver: OracleDBDriver\n            }\n        }\n\n        super( _parameters )\n\n    }\n\n    close ( /*onCloseCallback*/ ) {}\n\n    connect () {\n\n        const config = {\n            user:          'DbUser',\n            password:      'DbPassword',\n            connectString: 'localhost:1521/orcl'\n        }\n\n        async function getEmployee ( empId ) {\n            let conn\n\n            try {\n                conn = await this._driver.getConnection( config )\n\n                const result = await conn.execute(\n                    'select * from employees where employee_id = :id',\n                    [ empId ]\n                )\n\n                this.logger.log( result.rows[ 0 ] )\n            } catch ( err ) {\n                this.logger.log( 'Ouch!', err )\n            } finally {\n                if ( conn ) { // conn assignment worked, need to close\n                    await conn.close()\n                }\n            }\n        }\n\n        getEmployee( 101 )\n\n    }\n\n    on ( /*eventName, callback*/ ) {}\n\n    _initDatabase () {\n        super._initDatabase()\n\n    }\n\n}\n\nexport { TOracleDatabase }\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA,MAAM,eAAe,SAAS,iBAAiB,CAAC;AAChD;AACA,IAAI,WAAW,CAAC,EAAE,UAAU,GAAG,EAAE,GAAG;AACpC;AACA,QAAQ,MAAM,WAAW,GAAG;AAC5B,YAAY,GAAG,EAAE;AACjB,YAAY,GAAG,UAAU;AACzB,YAAY,GAAG;AACf,gBAAgB,MAAM,EAAE,cAAc;AACtC,aAAa;AACb,UAAS;AACT;AACA,QAAQ,KAAK,EAAE,WAAW,GAAE;AAC5B;AACA,KAAK;AACL;AACA,IAAI,KAAK,CAAC,wBAAwB,EAAE;AACpC;AACA,IAAI,OAAO,CAAC,GAAG;AACf;AACA,QAAQ,MAAM,MAAM,GAAG;AACvB,YAAY,IAAI,WAAW,QAAQ;AACnC,YAAY,QAAQ,OAAO,YAAY;AACvC,YAAY,aAAa,EAAE,qBAAqB;AAChD,UAAS;AACT;AACA,QAAQ,eAAe,WAAW,GAAG,KAAK,GAAG;AAC7C,YAAY,IAAI,KAAI;AACpB;AACA,YAAY,IAAI;AAChB,gBAAgB,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,MAAM,GAAE;AACjE;AACA,gBAAgB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO;AACjD,oBAAoB,iDAAiD;AACrE,oBAAoB,EAAE,KAAK,EAAE;AAC7B,kBAAiB;AACjB;AACA,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,GAAE;AACnD,aAAa,CAAC,QAAQ,GAAG,GAAG;AAC5B,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,GAAE;AAC/C,aAAa,SAAS;AACtB,gBAAgB,KAAK,IAAI,GAAG;AAC5B,oBAAoB,MAAM,IAAI,CAAC,KAAK,GAAE;AACtC,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA,QAAQ,WAAW,EAAE,GAAG,GAAE;AAC1B;AACA,KAAK;AACL;AACA,IAAI,EAAE,CAAC,4BAA4B,EAAE;AACrC;AACA,IAAI,aAAa,CAAC,GAAG;AACrB,QAAQ,KAAK,CAAC,aAAa,GAAE;AAC7B;AACA,KAAK;AACL;AACA;;;;"}